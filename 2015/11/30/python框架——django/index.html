<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Python框架——django | GuoXu&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="GuoXu,GuoXu's Blog">
  
  <meta name="description" content="一、虚拟环境virtualenv --no-site-packages [-p python.exe路径] 环境名  二、安装与使用1. 安装  pip install django==2.1.7 2. 创建django项目 django-admin startproject 项目名 3. 创建django应用 python manage.py startapp 应用名 4. 启动，修改ip和端口">
<meta name="keywords" content="Python,Python框架">
<meta property="og:type" content="article">
<meta property="og:title" content="Python框架——django">
<meta property="og:url" content="http://yoursite.com/2015/11/30/python框架——django/index.html">
<meta property="og:site_name" content="GuoXu&#39;s Blog">
<meta property="og:description" content="一、虚拟环境virtualenv --no-site-packages [-p python.exe路径] 环境名  二、安装与使用1. 安装  pip install django==2.1.7 2. 创建django项目 django-admin startproject 项目名 3. 创建django应用 python manage.py startapp 应用名 4. 启动，修改ip和端口">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/devilGuoXu/picture_bed/blob/master/middleware1.png?raw=true">
<meta property="og:image" content="https://github.com/devilGuoXu/picture_bed/blob/master/middleware2.png?raw=true">
<meta property="og:updated_time" content="2019-04-24T11:34:00.118Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python框架——django">
<meta name="twitter:description" content="一、虚拟环境virtualenv --no-site-packages [-p python.exe路径] 环境名  二、安装与使用1. 安装  pip install django==2.1.7 2. 创建django项目 django-admin startproject 项目名 3. 创建django应用 python manage.py startapp 应用名 4. 启动，修改ip和端口">
<meta name="twitter:image" content="https://github.com/devilGuoXu/picture_bed/blob/master/middleware1.png?raw=true">
  
  
    <link rel="icon" href="/images/logo.png">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>
</html>
<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">GuoXu&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a href="/">
                        <i class="fa fa-home"></i>
                        <span>主页</span>
                    </a>
                    
                    <a href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>归档</span>
                    </a>
                    
                    <a href="/about">
                        <i class="fa fa-user"></i>
                        <span>关于</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        GuoXu&#39;s Blog
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        越努力，越幸运
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="GuoXu" target="_blank" href="//devilguoxu.github.io">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/devilGuoXu">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="Weibo" target="_blank" href="//weibo.com/u/1945712603?is_all=1">
                            <i class="fa fa-weibo fa-2x"></i></a>
                    
                        <a title="Snapchat" target="_blank" href="//www.snapchat.com">
                            <i class="fa fa-snapchat fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-python框架——django" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      Python框架——django
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/categories/Python框架/">Python框架</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2015-11-30
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h1 id="一、虚拟环境"><a href="#一、虚拟环境" class="headerlink" title="一、虚拟环境"></a>一、虚拟环境</h1><pre><code>virtualenv --no-site-packages [-p python.exe路径] 环境名
</code></pre><hr>
<h1 id="二、安装与使用"><a href="#二、安装与使用" class="headerlink" title="二、安装与使用"></a>二、安装与使用</h1><font size="5"><strong>1. 安装</strong></font>

<pre><code>pip install django==2.1.7
</code></pre><p><br><font size="5"><strong>2. 创建django项目</strong></font></p>
<pre><code>django-admin startproject 项目名
</code></pre><p><br><font size="5"><strong>3. 创建django应用</strong></font></p>
<pre><code>python manage.py startapp 应用名
</code></pre><p><br><font size="5"><strong>4. 启动，修改ip和端口</strong></font></p>
<pre><code>python manage.py runserver [IP:]端口
</code></pre><p><br><font size="5"><strong>5. 配置文件settings.py</strong></font><br><br><font size="4">1). 数据库</font></p>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,
        &apos;NAME&apos;: &apos;dj9&apos;,
        &apos;USER&apos;: &apos;root&apos;,
        &apos;PASSWORD&apos;: &apos;123456&apos;,
        &apos;HOST&apos;: &apos;127.0.0.1&apos;,
        &apos;PORT&apos;: 3306,
        &apos;OPTIONS&apos;: {&apos;isolation_level&apos;: None}
    }
}

# 工程目录__init__.py中设置

import pymysql

pymysql.install_as_MySQLdb()
</code></pre><p><br><font size="4">2). 自定义包</font></p>
<pre><code>INSTALLED_APPS = [

    ...
    &apos;包1&apos;,
    &apos;包2&apos;,
    ...
]
</code></pre><p><br><font size="4">3). 语言</font></p>
<pre><code>LANGUAGE_CODE = &apos;en-us&apos;
#中文 &apos;zh-hans&apos;
</code></pre><p><br><font size="4">4). 静态文件</font></p>
<pre><code>STATIC_URL = &apos;/static/&apos;
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, &apos;static&apos;)
]
</code></pre><p><br><font size="5"><strong>6. 管理后台</strong></font><br>访问:</p>
<pre><code>IP:端口/admin/
</code></pre><p>创建账号:</p>
<pre><code>python manage.py createsuperuser
</code></pre><hr>
<h1 id="三、-模型"><a href="#三、-模型" class="headerlink" title="三、 模型"></a>三、 模型</h1><h4 id="1-迁移"><a href="#1-迁移" class="headerlink" title="1. 迁移"></a>1. 迁移</h4><p>生成迁移文件:</p>
<pre><code>python manage.py makemigrations
</code></pre><p>执行迁移文件:</p>
<pre><code>python manage.py migrate
</code></pre><p>注意: 当第一次迁移django默认提供的表时，直接执行migrate命令即可</p>
<h4 id="2-字段定义"><a href="#2-字段定义" class="headerlink" title="2. 字段定义"></a>2. 字段定义</h4><table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>IntegerField</td>
<td>整型</td>
</tr>
<tr>
<td>CharField</td>
<td>字符串</td>
</tr>
<tr>
<td>BooleanField</td>
<td>布尔值</td>
</tr>
<tr>
<td>DateTimeField</td>
<td>年月日时分秒</td>
</tr>
<tr>
<td>DateField</td>
<td>年月日</td>
</tr>
<tr>
<td>TimeField</td>
<td>时间戳</td>
</tr>
<tr>
<td>ImageFiled</td>
<td>图片</td>
</tr>
<tr>
<td>FloatFiled</td>
<td>浮点数</td>
</tr>
<tr>
<td>DecimalField</td>
<td>浮点数,指定了长度的浮点数</td>
</tr>
<tr>
<td>TextField</td>
<td>存文本，texteare</td>
</tr>
<tr>
<td>AutoField</td>
<td>自增字段，不用定义</td>
</tr>
</tbody>
</table>
<h4 id="3-约束定义"><a href="#3-约束定义" class="headerlink" title="3. 约束定义"></a>3. 约束定义</h4><table>
<thead>
<tr>
<th>约束</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>max_length</td>
<td>最大长度</td>
</tr>
<tr>
<td>min_length</td>
<td>最小长度</td>
</tr>
<tr>
<td>unique</td>
<td>唯一</td>
</tr>
<tr>
<td>null</td>
<td>是否为空</td>
</tr>
<tr>
<td>default</td>
<td>默认值</td>
</tr>
<tr>
<td>auto_now_add和auto_now</td>
<td>（互斥）</td>
</tr>
</tbody>
</table>
<h4 id="4-模型操作"><a href="#4-模型操作" class="headerlink" title="4. 模型操作"></a>4. 模型操作</h4><font size="4"><strong>1. 增</strong></font>

<pre><code>对象.save()
create(字段=值,字段2=值2...)
</code></pre><p><br><font size="4"><strong>2. 删</strong></font></p>
<pre><code>对象.delete()
filter().delete()
</code></pre><p><br><font size="4"><strong>3. 改</strong></font></p>
<pre><code>修改的对象.save()
filter().update(字段=值，字段2=值2...)
</code></pre><p><br><font size="4"><strong>4. 查</strong></font><br>1) filter</p>
<pre><code>filter(字段=值)
</code></pre><p>2) get</p>
<pre><code>get(条件)
# 条件必须成立，查询结果只有一个
</code></pre><p>3) exclude</p>
<pre><code>exclude(条件)
# 将满足条件的信息全部过滤掉
</code></pre><p>4) count</p>
<pre><code>count()
# 查询结果的个数
</code></pre><p>5) values</p>
<pre><code>values(&apos;字段&apos;)
# 将对象的内容序列化成字典、json
</code></pre><p>6) order_by</p>
<pre><code>order_by(&apos;字段&apos;)
# 升序
order_by(&apos;-字段&apos;)
# 降序
</code></pre><p>7) pk__in</p>
<pre><code>filter(pk__in=[1, 2, 3,...])
# pk=id,满足集合中内容
</code></pre><p>8) contains</p>
<pre><code>filter(字段__contains=值)
# sql中的like，包含
</code></pre><p>9) startswith</p>
<pre><code>filter(字段__startswith=值)
# 以什么开头
</code></pre><p>10) endswith</p>
<pre><code>filter(字段__endswith=值)
# 以什么结束
</code></pre><p>11) gt、gte、lt、lte</p>
<pre><code>filter(字段__gt=值)
# 大于
filter(字段__gte=值)
# 大于等于
filter(字段__lt=值)
# 小于
filter(字段__lte=值)
# 小于等于
</code></pre><p>12) Avg，Sum，Count, Max，Min</p>
<pre><code>aggregate(Avg(&apos;字段&apos;))
# 聚合
</code></pre><p>13) F</p>
<pre><code>filter(字段1__gt=F(&apos;字段2&apos;))
# 对象两个属性字段，可以进行加减算法
</code></pre><p>14) Q</p>
<pre><code>filter(Q(条件1)|Q(条件2))
# 或
filter(~Q(条件))
# 非
</code></pre><p>15) all</p>
<pre><code>all()
# queryset结果
</code></pre><p>16) first</p>
<pre><code>first()
# 取结果中第一个对象
</code></pre><p>17) last</p>
<pre><code>last()
# 取结果中最后一个对象
</code></pre><p>18）exists</p>
<pre><code>exists()
# 判断是否为空
</code></pre><hr>
<h1 id="四、模型关系"><a href="#四、模型关系" class="headerlink" title="四、模型关系"></a>四、模型关系</h1><font size="5"><strong>1. 一对一</strong></font>

<pre><code>class A():
    id = models.IntegerFiled()

class B():
    aa = models.OneToOneField(A,related_name=&apos;cc&apos;)

# 已知：A对象a，查询B对象
    related_name没定义时：a.b
    related_name已定义时：a.cc

# 已知：B对象b，查询A对象
    b.aa
</code></pre><p>注意: OneToOneField定义的字段可以写在关联模型的任何一方<br><br><font size="5"><strong>2. 一对多</strong></font></p>
<pre><code>class A():
    id

class B():
    aa = ForeignKey(A,related_name=&apos;cc&apos;)

# 已知：A对象a，查询B对象
    related_name没定义时：a.b_set
    related_name已定义时：a.cc

# 已知：B对象b，查询A对象
    b.aa
</code></pre><p>注意: ForeignKey定义的字段表示多的对方，因此只能放在’多’的模型中<br><br><font size="5"><strong>3. 多对多</strong></font></p>
<pre><code>class A():
    id

class B():
    aa = models.ManyToManyField(A,related_name=&apos;cc&apos;)

# 已知：A对象a，查询B对象
    related_name没定义时：a.b_set
    related_name已定义时：a.cc

# 已知：B对象b，查询A对象
    b.aa

# 中间表的添加: 对象.字段.add(对象)、删除: remove()
</code></pre><p>注意: ManyToManyField定义的字段定义在任何一个关联模型中都可<br><br><font size="5"><strong>4. on_delete</strong></font></p>
<p>外键删除时的调用的功能</p>
<table>
<thead>
<tr>
<th>值</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>CASCADE</td>
<td>此值设置，是级联删除。</td>
</tr>
<tr>
<td>PROTECT</td>
<td>此值设置，是会报完整性错误。</td>
</tr>
<tr>
<td>SET_NULL</td>
<td>此值设置，会把外键设置为null，前提是允许为null。</td>
</tr>
<tr>
<td>SET_DEFAULT</td>
<td>此值设置，会把设置为外键的默认值。</td>
</tr>
<tr>
<td>SET()</td>
<td>此值设置，会调用外面的值，可以是一个函数。</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="五、模板"><a href="#五、模板" class="headerlink" title="五、模板"></a>五、模板</h1><font size="5"><strong>1. 父模板</strong></font>

<p>挖坑</p>
<pre><code>{ % block name % } { % endblock % }
</code></pre><p><br><font size="5"><strong>2. 子模板</strong></font></p>
<p>继承父模板后填坑</p>
<pre><code>{ % extends &apos;父模板&apos; % }
</code></pre><p><br><font size="5"><strong>3. 标签</strong></font></p>
<table>
<thead>
<tr>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{ % block 名字 % } { % endblock % }</code></td>
<td></td>
</tr>
<tr>
<td><code>{ % if 条件 % }  { % else % }  { % endif % }</code></td>
<td></td>
</tr>
<tr>
<td><code>{ % ifequal 变量 值 % } { % endifequal % }</code></td>
<td></td>
</tr>
<tr>
<td><code>{ % for i in [] % } { % endfor % }</code></td>
<td></td>
</tr>
</tbody>
</table>
<p><br><font size="5"><strong>4. 变量</strong></font></p>
<pre><code>{{ 变量名 }}
{{ 对象.字段.下标 }}
{{ forloop.counter }}    # 同flask的loop.index
</code></pre><hr>
<h1 id="六、路由URL"><a href="#六、路由URL" class="headerlink" title="六、路由URL"></a>六、路由URL</h1><font size="5"><strong>1. path</strong></font>

<pre><code>path(&apos;路由/&apos;, 函数)

path(&apos;路由/&lt;转换器:参数名&gt;/&apos;, 函数)
# 转换器: int，str，uuid，path

path(&apos;路由/&apos;, 函数, name=&apos;名字&apos;)
</code></pre><p><br><font size="5"><strong>2. re_path</strong></font></p>
<pre><code>re_path(&apos;路由/(\d+)/(\w+)/&apos;, 函数)
re_path(&apos;路由/(?P&lt;参数名&gt;\d+)/&apos;, 函数)
</code></pre><p><br><font size="5"><strong>3. include</strong></font></p>
<pre><code>path(&apos;路由/&apos;, include(&apos;包.文件&apos;))
path(&apos;路由/&apos;, include((&apos;包.文件&apos;, &apos;包&apos;), namespace=&apos;名字&apos;))
# 拆分路由地址，将不同应用的URL文件进行拆分
</code></pre><p><br><font size="5"><strong>4. reverse</strong></font></p>
<pre><code># 反向解析路由

# 无参
return HttpResponseRedirect(reverse(&apos;namespace:name&apos;))

# 有参
reverse(&apos;namespace:name&apos;，kwargs={&apos;参数名&apos;: 值 })
reverse(&apos;namespace:name&apos;，args=(值，))
</code></pre><p><br><font size="5"><strong>5. 页面解析</strong></font></p>
<pre><code>{% url ‘namespace：name’ 值1 值2 值3... %}
</code></pre><hr>
<h1 id="七、请求与响应"><a href="#七、请求与响应" class="headerlink" title="七、请求与响应"></a>七、请求与响应</h1><font size="5"><strong>1. 请求request</strong></font>

<table>
<thead>
<tr>
<th>名称</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td>判断请求方式，主要GET/POST</td>
</tr>
<tr>
<td>path</td>
<td>获取访问的路由地址</td>
</tr>
<tr>
<td>FILES</td>
<td>获取图片文件的信息</td>
</tr>
<tr>
<td>GET</td>
<td>获取请求get方式的数据，值为字典，可用get()、getlist()</td>
</tr>
<tr>
<td>POST</td>
<td>获取请求post方式的数据，值为字典，可用get()、getlist()</td>
</tr>
<tr>
<td>COOKIES</td>
<td>cookie内容</td>
</tr>
<tr>
<td>session</td>
<td>存储在服务端的数据</td>
</tr>
</tbody>
</table>
<p><br><font size="5"><strong>2. 响应response</strong></font></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>HttpResponseRedirect(‘路由’)</td>
<td>跳转</td>
</tr>
<tr>
<td>JsonResponse(json)</td>
<td>响应json格式的数据</td>
</tr>
<tr>
<td>HttpResponse(字符串)</td>
<td>响应字符串数据</td>
</tr>
<tr>
<td>render(request, ‘页面’)</td>
<td>响应页面</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="八、用户USER"><a href="#八、用户USER" class="headerlink" title="八、用户USER"></a>八、用户USER</h1><font size="5"><strong>1. 使用django自带的USER模块</strong></font>

<table>
<thead>
<tr>
<th>步骤</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>注册</td>
<td>create_user()</td>
</tr>
<tr>
<td>校验</td>
<td>authenticate(username,password)</td>
</tr>
<tr>
<td>登录</td>
<td>auth.login()</td>
</tr>
<tr>
<td>退出</td>
<td>auth.logout()</td>
</tr>
<tr>
<td>装饰器</td>
<td>login_required()</td>
</tr>
</tbody>
</table>
<p><br><font size="5"><strong>2. 自定义USER模块</strong></font></p>
<p>登录</p>
<pre><code>request.session[&apos;user_id&apos;] = user.id
</code></pre><p>退出</p>
<pre><code>request.session.flush()
request.session.delete(session_key)
del request.session[&apos;user_id&apos;]
</code></pre><p>装饰器</p>
<pre><code>from django.http import HttpResponseRedirect
from django.urls import reverse

from user.models import 库类
</code></pre><p>​<br>    def is_login(func):</p>
<pre><code>def check(request):
    # 登录的校验
    if &apos;user_id&apos; in request.session:
        user = 库类.objects.get(pk=request.session[&apos;user_id&apos;])
        request.user = user
        return func(request)
    else:
        return HttpResponseRedirect(reverse(&apos;namespace:name&apos;))
return check
</code></pre><hr>
<h1 id="九、中间件middleware"><a href="#九、中间件middleware" class="headerlink" title="九、中间件middleware"></a>九、中间件middleware</h1><font size="5"><strong>1. 配置文件</strong></font>

<p>settings.py中的MIDDLEWARE添加路径</p>
<pre><code>MIDDLEWARE = [
    ...
    &apos;包.文件.类&apos;,    # 中间件地址
]
</code></pre><p><br><font size="5"><strong>2. 导包</strong></font></p>
<pre><code>from django.utils.deprecation import MiddlewareMixin
</code></pre><p><br><font size="5"><strong>3. 继承</strong></font></p>
<pre><code>class 类(MiddlewareMixin):
</code></pre><p><br><font size="5"><strong>4. 函数</strong></font></p>
<p>1). 请求进来时直接进行拦截（应用场景: 登录校验）</p>
<pre><code>process_request(self, request)
</code></pre><p>2). 调用view方法之前进行调用</p>
<pre><code>process_view(self, request, view_func, view_args, view_kwargs)
</code></pre><p>3). 不主动调用,只有出现异常时才执行</p>
<pre><code>process_exception(self, request, exception)
</code></pre><p>4). 最后响应浏览器时才调用</p>
<pre><code>process_response(self, request, response)
</code></pre><p>5). 只有当views函数中返回的对象中具有render方法，才会直接process_template_response</p>
<pre><code>process_template_response(self, request, response)
</code></pre><p><br><font size="5"><strong>5. 执行顺序</strong></font><br><img src="https://github.com/devilGuoXu/picture_bed/blob/master/middleware1.png?raw=true" alt><br><img src="https://github.com/devilGuoXu/picture_bed/blob/master/middleware2.png?raw=true" alt></p>
<hr>
<h1 id="十、表单验证"><a href="#十、表单验证" class="headerlink" title="十、表单验证"></a>十、表单验证</h1><font size="5"><strong>1. 定义</strong></font>

<pre><code>from django import forms

class 类(forms.Form):
    input标签name值 = forms.CharField(required=True, max_length=N, min_length=M,
                               error_messages={
                                   &apos;required&apos;: &apos;必须填写信息&apos;,
                                   &apos;max_length&apos;: &apos;至多N字符&apos;,
                                   &apos;min_length&apos;: &apos;至少M字符&apos;
                               })

                     forms.IntegerField
                     forms.ImageField

    def clean():
        # 自动调用
    def clean_字段():
        # 校验指定字段
</code></pre><p><br><font size="5"><strong>2. 实例表单</strong></font></p>
<pre><code>form = UserForm(request.POST, request.FILES)
</code></pre><p><br><font size="5"><strong>3. 验证</strong></font></p>
<pre><code>form.is_valid()
</code></pre><p><br><font size="5"><strong>4. 验证错误信息</strong></font></p>
<pre><code>form.errors
</code></pre><hr>
<h1 id="十一、文件上传"><a href="#十一、文件上传" class="headerlink" title="十一、文件上传"></a>十一、文件上传</h1><font size="5"><strong>1. 安装</strong></font>

<pre><code>pip install pillow
</code></pre><p><br><font size="5"><strong>2. 模型中定义字段</strong></font></p>
<pre><code>字段 = models.ImageField(upload_to=&apos;upload&apos;)
</code></pre><p><br><font size="5"><strong>3. 设置media文件夹路径</strong></font></p>
<p>settings.py文件中设置</p>
<pre><code>MEDIA_URL = &apos;media&apos;
MEDIA_ROOT=os.path.join(BASE_DIR, &apos;media&apos;)
</code></pre><p>展示图片需在工程目录的urls.py文件中指定路由</p>
<pre><code>from django.contrib.staticfiles.urls import static

from 主应用包.settings import MEDIA_URL, MEDIA_ROOT

urlpatterns += static(MEDIA_URL, document_root=MEDIA_ROOT)
</code></pre><p><br><font size="5"><strong>4. 前端</strong></font></p>
<pre><code>&lt;form enctype=&quot;multipart/form-data&quot;&gt;
    &lt;input type=&quot;file&quot; name=&quot;名字&quot;&gt;
&lt;/form&gt;
</code></pre><hr>
<h1 id="十二、分页"><a href="#十二、分页" class="headerlink" title="十二、分页"></a>十二、分页</h1><pre><code>paginator = Paginator(所有数据, 条数)
</code></pre><p><br><font size="5"><strong>1. 获取总页数</strong></font></p>
<pre><code>paginator.num_pages
</code></pre><p><br><font size="5"><strong>2. 获取某一个页面</strong></font></p>
<pre><code>页面对象 = paginator.page(页码)
</code></pre><p><br><font size="5"><strong>3. 是否有下一页</strong></font></p>
<pre><code>页面对象.has_next()
</code></pre><p><br><font size="5"><strong>4. 是否有上一页</strong></font></p>
<pre><code>页面对象.has_previous()
</code></pre><p><br><font size="5"><strong>5. 下一页页码</strong></font></p>
<pre><code>页面对象.next_page_number
</code></pre><p><br><font size="5"><strong>6. 上一页页码</strong></font></p>
<pre><code>页面对象.previous_page_number
</code></pre><p><br><font size="5"><strong>7. 总页数（格式：rang(1,长度+1)）</strong></font></p>
<pre><code>页面对象.paginator.page_range
</code></pre><p><br><font size="5"><strong>8. 获取paginator对象</strong></font></p>
<pre><code>页面对象.paginator
</code></pre><hr>
<h1 id="十二、权限（RBAC）"><a href="#十二、权限（RBAC）" class="headerlink" title="十二、权限（RBAC）"></a>十二、权限（RBAC）</h1><font size="5"><strong>1. 用户和权限</strong></font>

<pre><code>user_permissions
</code></pre><font size="5"><strong>2. 用户和角色</strong></font>

<pre><code>groups
</code></pre><font size="5"><strong>3. 角色和权限</strong></font>

<pre><code>permissions
</code></pre><font size="5"><strong>4. 权限列表</strong></font>

<ol>
<li>通过用户查询权限表</li>
<li>通过用户查询角色，角色查询权限</li>
</ol>
<font size="5"><strong>5. 权限获取</strong></font>

<p>获取所有权限: 包括用户对应角色权限和用户对应权限表</p>
<pre><code>get_all_permission()
</code></pre><p>获取用户组权限</p>
<pre><code>get_group_permission
</code></pre><font size="5"><strong>6. 权限校验装饰器</strong></font>

<pre><code>@permission_required(&apos;应用名.权限名&apos;)
</code></pre><font size="5"><strong>7. 前端</strong></font>

<pre><code># 应用名.权限名
{{ perms }}

{% if perms.user.add_users %}
</code></pre><hr>
<h1 id="十三、日志"><a href="#十三、日志" class="headerlink" title="十三、日志"></a>十三、日志</h1><font size="5"><strong>1. 日志logging模块</strong></font>

<p>logging模块可以收集记录错误，警告等调试信息，在程序中可以捕获这些信息，并且甚至可以将错误的重要信息等都可以通过邮件发送给开发者</p>
<p><br><font size="5"><strong>2. logging的组成</strong></font></p>
<pre><code>Loggers

Handlers

Filters

Formatters
</code></pre><p><br><font size="5"><strong>3. Loggers</strong></font></p>
<p>Logger 为日志系统的入口。每个logger 是一个具名的容器，可以向它写入需要处理的消息。</p>
<p>每个logger 都有一个日志级别。日志级别表示该logger 将要处理的消息的严重性。</p>
<p>Python 定义以下几种日志级别：</p>
<pre><code>DEBUG：用于调试目的的底层系统信息

INFO：普通的系统信息

WARNING：表示出现一个较小的问题。

ERROR：表示出现一个较大的问题。

CRITICAL：表示出现一个致命的问题。
</code></pre><p>日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG &gt; NOTSET</p>
<p><br><font size="5"><strong>4. Handlers</strong></font></p>
<p>Handler 决定如何处理logger 中的每条消息。它表示一个特定的日志行为。</p>
<p>与logger 一样，handler 也有一个日志级别。如果消息的日志级别小于handler 的级别，handler 将忽略该消息。</p>
<p>Logger 可以有多个handler，而每个handler 可以有不同的日志级别。</p>
<p><br><font size="5"><strong>5. Filters</strong></font></p>
<p>Filter 用于对从logger 传递给handler 的日志记录进行额外的控制。</p>
<p><br><font size="5"><strong>6. Formatters</strong></font></p>
<p>日志记录需要转换成文本。</p>
<p>Formatter 表示文本的格式。Fomatter 通常由包含日志记录属性的Python 格式字符串组成；</p>
<p>你也可以编写自定义的fomatter 来实现自己的格式。</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%(name)s</td>
<td>记录器的名称</td>
</tr>
<tr>
<td>%(levelno)s</td>
<td>数字形式的日志记录级别</td>
</tr>
<tr>
<td>%(levelname)s</td>
<td>日志记录级别的文本名称</td>
</tr>
<tr>
<td>%(filename)s</td>
<td>执行日志记录调用的源文件的文件名称</td>
</tr>
<tr>
<td>%(pathname)s</td>
<td>执行日志记录调用的源文件的路径名称</td>
</tr>
<tr>
<td>%(funcName)s</td>
<td>执行日志记录调用的函数名称</td>
</tr>
<tr>
<td>%(module)s</td>
<td>执行日志记录调用的模块名称</td>
</tr>
<tr>
<td>%(lineno)s</td>
<td>执行日志记录调用的行号</td>
</tr>
<tr>
<td>%(created)s</td>
<td>执行日志记录的时间</td>
</tr>
<tr>
<td>%(asctime)s</td>
<td>日期和时间</td>
</tr>
<tr>
<td>%(msecs)s</td>
<td>毫秒部分</td>
</tr>
<tr>
<td>%(thread)d</td>
<td>线程ID</td>
</tr>
<tr>
<td>%(threadName)s</td>
<td>线程名称</td>
</tr>
<tr>
<td>%(process)d</td>
<td>进程ID</td>
</tr>
<tr>
<td>%(message)s</td>
<td>记录的消息</td>
</tr>
</tbody>
</table>
<p><br><font size="5"><strong>7. 配置日志</strong></font></p>
<p>1). 在settings.py文件中配置LOGGING日志信息</p>
<pre><code># 日志文件夹的路径
LOG_PATH = os.path.join(BASE_DIR, &apos;logs&apos;)

# 配置日志
LOGGING = {
    # 必须是1
    &apos;version&apos;: 1,

    # 默认为True，禁用日志
    &apos;disable_existing_loggers&apos;: False,

    # 定义loggers组件，用于接收日志信息
    &apos;loggers&apos;:{
        &apos;&apos;:{
            # 将接收到的日志信息丢给handlers去处理
            &apos;handlers&apos;: [&apos;console&apos;],
            &apos;level&apos;: &apos;INFO&apos;
        }
    },
    # 定义handlers组件，用户写入日志信息
    &apos;handlers&apos;:{
        &apos;console&apos;:{
            &apos;level&apos;: &apos;INFO&apos;,
            # 定义存储日志的文件
            &apos;filename&apos;: &apos;%s/%s&apos; % (LOG_PATH, &apos;sys.log),
            # 指定写入日志中信息的格式
            &apos;formatter&apos;: &apos;default&apos;,
            # 指定日志文件超过5M就自动做备份
            &apos;class&apos;: &apos;logging.handlers.RotatingFileHandler&apos;,
            &apos;maxBytes&apos;: 5 * 1024 * 1024,
        }
    },

    # 定义formatters组件，定义存储日志中的格式
    &apos;formatters&apos;:{
        &apos;default&apos;: {
            &apos;format&apos;: &apos;%(levelno)s %(name)s %(asctime)s&apos;
        }
    }
}
</code></pre><p>2). 定义日志处理的中间件，进行日志的打印处理</p>
<p>定义并设置日志中间件logMiddleware.py文件</p>
<pre><code>import logging
import time

try:
    # needed to support Django &gt;= 1.10 MIDDLEWARE
    from django.utils.deprecation import MiddlewareMixin
except ImportError:
    # needed to keep Django &lt;= 1.9 MIDDLEWARE_CLASSES
    MiddlewareMixin = object

# 获取logger
logger = logging.getLogger(__name__)
# logger接收日志信息的几个方法，如下:
# logger.debug()
# logger.info()
# logger.warning()
# logger.error()
# logger.critical()

class LogMiddle(MiddlewareMixin):

    def process_request(self, request):
        # url到服务器的时候，经过中间件最先执行的方法
        request.init_time = time.time()
        request.init_body = request.body

    def process_response(self, request, response):
        try:
            # 经过中间件，最后执行的方法
            # 计算请求到响应的时间
            count_time = time.time() - request.init_time
            # 请求路径
            path = request.path
            # 请求方式
            method = request.method
            # 获取响应的状态码
            code = response.status_code
            # 获取请求的内容
            req_body = request.init_body
            # 获取响应的内容
            res_body = response.content

            message = &apos;%s %s %s %s %s %s&apos; % (count_time, path, method, code, req_body, res_body)
            # 写入日志信息
            logger.info(message)
        except Exception as e:
            logger.critical(&apos;log error, Exception:%s&apos; % e)

        return response
</code></pre><p>3). 设置settings.py中的MIDDLEWARE的值</p>
<pre><code>MIDDLEWARE = [
    ...
    &apos;utils.logMiddleware.LogMiddle&apos;,
]
</code></pre><hr>
<h1 id="十四、drf（API工具包）"><a href="#十四、drf（API工具包）" class="headerlink" title="十四、drf（API工具包）"></a>十四、drf（API工具包）</h1><font size="5"><strong>1. 安装与配置</strong></font>

<p>1). 安装</p>
<pre><code># 安装djangorestframework
pip install djangorestframework
# 安装过滤
pip install django-filter
</code></pre><p>2).配置settings.py文件</p>
<pre><code>INSTALLED_APPS = [
    ...
    &apos;rest_framework&apos;,
]
</code></pre><p><br><font size="5"><strong>2. 路由</strong></font></p>
<p>设置urls.py文件</p>
<pre><code>from rest_framework.routers import SimpleRouter

# 获取路由
router = SimpleRouter()
# 注册资源， /app/article/   /app/article/id/
router.register(&apos;article&apos;, ArticleView)

urlpatterns = [
    ...
]

# 新增路由地址
urlpatterns += router.urls
</code></pre><p><br><font size="5"><strong>3. 视图</strong></font></p>
<p>设置views.py文件</p>
<pre><code>from rest_framework import viewsets, mixins

from app.models import Article
from app.serializers import ArticleSerializer

class ArticleView(viewsets.GenericViewSet,
                  mixins.ListModelMixin,
                  mixins.RetrieveModelMixin,
                  mixins.DestroyModelMixin,
                  mixins.CreateModelMixin,
                  mixins.UpdateModelMixin):
# 获取资源所对应的数据信息：（指明在查询数据时使用的查询集）
queryset = Article.objects.all()
# 序列化：（指明该视图在进行序列化或反序列化时使用的序列化器）
serializer_class = ArticleSerializer
# 过滤
filter_class = ArticleFilter
</code></pre><p><br><font size="5"><strong>4. 序列化</strong></font></p>
<p>应用包下定义并设置serializers.py文件</p>
<pre><code>from rest_framework import serializers

from app.models import Article


class ArticleSerializer(serializers.ModelSerializer):
    title = serializers.CharField(required=True,
                                  max_length=10,
                                  min_length=4,
                                  error_messages={
                                      &apos;required&apos;: &apos;描述必填&apos;,
                                      &apos;max_length&apos;: &apos;不能超过10字符&apos;,
                                      &apos;min_length&apos;: &apos;不能少于4字符&apos;
                                  })
    desc = serializers.CharField(min_length=5)

    class Meta:
        # 序列化模型：（指明该序列化器处理的数据字段从模型类Article参考生成）
        model = Article
        # 序列化后展示哪些字段：（指明该序列化器包含模型类中的哪些字段，&apos;all&apos;指明包含所有字段）
        fields = [&apos;id&apos;, &apos;title&apos;, &apos;desc&apos;]
</code></pre><p><br><font size="5"><strong>5. 条件过滤</strong></font></p>
<p>应用包下定义并设置filters.py文件</p>
<pre><code>import django_filters

from article.models import Article
</code></pre><p>​<br>    class ArticleFilter(django_filters.rest_framework.FilterSet):</p>
<pre><code># 过滤字段
q = django_filters.CharFilter(&apos;title&apos;, lookup_expr=&apos;contains&apos;)
is_delete = django_filters.CharFilter(&apos;is_delete&apos;)
id_min = django_filters.CharFilter(&apos;id&apos;, lookup_expr=&apos;gt&apos;)
id_max = django_filters.CharFilter(&apos;id&apos;, lookup_expr=&apos;lt&apos;)

class Meta:
    # 过滤模型
    model = Article
    # 过滤字段
    fields = [&apos;title&apos;, &apos;is_delete&apos;]
</code></pre><p><br><font size="5"><strong>6. 分页</strong></font></p>
<p>配置settings.py文件</p>
<pre><code># DRF配置
REST_FRAMEWORK = {
    # 配置分页类
    &apos;DEFAULT_PAGINATION_CLASS&apos;: &apos;rest_framework.pagination.PageNumberPagination&apos;,
    # 配置每一页数据的条数
    &apos;PAGE_SIZE&apos;: 5,
    # 过滤
    &apos;DEFAULT_FILTER_BACKENDS&apos;: (
        &apos;django_filters.rest_framework.DjangoFilterBackend&apos;,
    ),
    # 重构renderer
    &apos;DEFAULT_RENDERER_CLASSES&apos;: (
        &apos;utils.renderer.MyJsonRenderer&apos;,
    ),
}
</code></pre><p><br><font size="5"><strong>7. 重构</strong></font></p>
<p>utils包下定义并设置renderer.py文件</p>
<pre><code>from rest_framework.renderers import JSONRenderer
</code></pre><p>​<br>    class MyJsonRenderer(JSONRenderer):</p>
<pre><code>def render(self, data, accepted_media_type=None, renderer_context=None):
    &quot;&quot;&quot;
        data转化为：
        {
            &apos;code&apos;: 200,
            &apos;msg&apos;: &apos;请求成功&apos;,
            &apos;data&apos;: data
        }
    &quot;&quot;&quot;
    try:
        code = data.pop(&apos;code&apos;)
        msg = data.pop(&apos;msg&apos;)
    except:
        code = 200
        msg = &apos;请求成功&apos;
    res = {
        &apos;code&apos;: code,
        &apos;msg&apos;: msg,
        &apos;data&apos;: data
    }
    return super().render(res)
</code></pre><p><br><font size="5"><strong>8. Redis缓存</strong></font></p>
<p>1). 安装</p>
<pre><code>pip3 install django-redis
</code></pre><p>2). 配置settings.py</p>
<pre><code>CACHES = {
    &quot;default&quot;: {
        &quot;BACKEND&quot;: &quot;django_redis.cache.RedisCache&quot;,
        &quot;LOCATION&quot;: &quot;redis://127.0.0.1:6379&quot;,
        &quot;OPTIONS&quot;: {
            &quot;CLIENT_CLASS&quot;: &quot;django_redis.client.DefaultClient&quot;
        }
    }
}
</code></pre><p>3). 引用</p>
<pre><code>from django.core.cache import cache

cache.set(&apos;&apos;, &apos;&apos;)
</code></pre>
            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2019年04月24日 19:34</p>
        <p>原始链接： <a class="post-url" href="/2015/11/30/python框架——django/" title="Python框架——django">http://yoursite.com/2015/11/30/python框架——django/</a></p>
        <footer>
            <a href="http://yoursite.com">
                <img src="/images/logo.png" alt="Allen">
                Allen
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        请我吃糖~
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/images/wechat_code.jpg" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            <label class="reward-select-item checked" data-id="wechat" data-wechat="/images/wechat_code.jpg">
                <img class="reward-select-item-wechat" src="/images/wechat.png" alt="微信">
            </label>
            
            
            <label class="reward-select-item" data-id="alipay" data-alipay="/images/alipay_code.jpg">
                <img class="reward-select-item-alipay" src="/images/alipay.png" alt="支付宝">
            </label>
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2015/11/30/python框架——django/&title=《Python框架——django》 — GuoXu's Blog&pic=https://github.com/devilGuoXu/picture_bed/blob/master/django.jpg?raw=true" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2015/11/30/python框架——django/&title=《Python框架——django》 — GuoXu's Blog&source=" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2015/11/30/python框架——django/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Python框架——django》 — GuoXu's Blog&url=http://yoursite.com/2015/11/30/python框架——django/&via=http://yoursite.com" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/2015/11/30/python框架——django/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://yoursite.com/2015/11/30/python框架——django/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/Python/" class="color2">Python</a>
      
    <a href="/tags/Python框架/" class="color4">Python框架</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、虚拟环境"><span class="post-toc-text">一、虚拟环境</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、安装与使用"><span class="post-toc-text">二、安装与使用</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#三、-模型"><span class="post-toc-text">三、 模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-迁移"><span class="post-toc-text">1. 迁移</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-字段定义"><span class="post-toc-text">2. 字段定义</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-约束定义"><span class="post-toc-text">3. 约束定义</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-模型操作"><span class="post-toc-text">4. 模型操作</span></a></li></ol></li></ol><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#四、模型关系"><span class="post-toc-text">四、模型关系</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#五、模板"><span class="post-toc-text">五、模板</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#六、路由URL"><span class="post-toc-text">六、路由URL</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#七、请求与响应"><span class="post-toc-text">七、请求与响应</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#八、用户USER"><span class="post-toc-text">八、用户USER</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#九、中间件middleware"><span class="post-toc-text">九、中间件middleware</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十、表单验证"><span class="post-toc-text">十、表单验证</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十一、文件上传"><span class="post-toc-text">十一、文件上传</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十二、分页"><span class="post-toc-text">十二、分页</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十二、权限（RBAC）"><span class="post-toc-text">十二、权限（RBAC）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十三、日志"><span class="post-toc-text">十三、日志</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十四、drf（API工具包）"><span class="post-toc-text">十四、drf（API工具包）</span></a></li>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2015/11/30/python框架——过滤器/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          Python框架——过滤器
        
      </span>
    </a>
  
  
    <a href="/2015/11/30/python框架——tornado/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">Python框架——tornado</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/devilGuoXu/devilGuoXu.github.io" target="_blank">GX</a>
      &copy; 2019 Allen<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "http://yoursite.com",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/Linux/">Linux</a><a class="category-link" href="/categories/MySQL/">MySQL</a><a class="category-link" href="/categories/Pycharm/">Pycharm</a><a class="category-link" href="/categories/Python/">Python</a><a class="category-link" href="/categories/Python框架/">Python框架</a><a class="category-link" href="/categories/redis/">redis</a><a class="category-link" href="/categories/spider爬虫/">spider爬虫</a><a class="category-link" href="/categories/web前端/">web前端</a><a class="category-link" href="/categories/数据分析/">数据分析</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/Linux/" style="font-size: 17.5px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 12.5px;">MySQL</a> <a href="/tags/Pycharm/" style="font-size: 12.5px;">Pycharm</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/Python框架/" style="font-size: 15px;">Python框架</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/spider爬虫/" style="font-size: 12.5px;">spider爬虫</a> <a href="/tags/web前端/" style="font-size: 15px;">web前端</a> <a href="/tags/数据分析/" style="font-size: 12.5px;">数据分析</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a href="/">
                    <i class="fa fa-home"></i><span>主页</span>
                </a>
            </li>
            
            <li>
                <a href="/archives">
                    <i class="fa fa-archive"></i><span>归档</span>
                </a>
            </li>
            
            <li>
                <a href="/about">
                    <i class="fa fa-user"></i><span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/Linux/" style="font-size: 17.5px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 12.5px;">MySQL</a> <a href="/tags/Pycharm/" style="font-size: 12.5px;">Pycharm</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/Python框架/" style="font-size: 15px;">Python框架</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/spider爬虫/" style="font-size: 12.5px;">spider爬虫</a> <a href="/tags/web前端/" style="font-size: 15px;">web前端</a> <a href="/tags/数据分析/" style="font-size: 12.5px;">数据分析</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/js/particles.js"></script>







  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  <script src="/js/animate.js"></script>


  <script src="/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>